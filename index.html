<!DOCTYPE html>

<body bgcolor="#b5ffeb">
  <br>
  <button onclick="retrieve()">Get</button>
  <input class="input" id="url" type="text" name="link" value="https://pastebin.com/FrJPEEwY">
  <br>
  <pr id="debug">some text</pr>

  <script>
    var counter = document.getElementById("test").innerHTML;

    function retrieve() {
      var url = document.getElementById("url").value;
      var newUrl;
      var tempText;
      const regex = /http(?:s)?:\/\/pastebin.com\/(?:raw\/)?([A-z0-9]*)/;

      if ((m = regex.exec(url)) !== null) {
        var request = makeHttpObject();
        newUrl = "https://pastebin.com/raw/" + m[1].toString();
        request.open("GET", newUrl, true);
        request.send(null);
        request.onreadystatechange = function() {

          if (request.readyState == 4) {
            if (request.status == 0) {
              alert("CORS not enabled.")
            } else {
              display_txt = request.responseText.replace(/\n/g, "<br />");
              document.getElementById("debug").innerHTML = display_txt;
            }
          }
        };
      } 
      else {
        alert("This is not a pastebin link!");
      }
    }

    function makeHttpObject() {
      try {
        return new XMLHttpRequest();
      } catch (error) {}
      try {
        return new ActiveXObject("Msxml2.XMLHTTP");
      } catch (error) {}
      try {
        return new ActiveXObject("Microsoft.XMLHTTP");
      } catch (error) {}
      throw new Error("Could not create HTTP request object.");
    }
  </script>
</body>
